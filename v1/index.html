<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Happy New Year 2026 ‚Äì Anh v·∫´n ch·ªù em</title>

<style>
html,body{
    margin:0;height:100%;
    font-family:"Segoe UI",sans-serif;
    background:
      radial-gradient(circle at top,#ff7aa855,transparent 60%),
      linear-gradient(#ff7aa8,#12070f);
    color:#fff;overflow:hidden;
}

/* ===== FIREWORKS ===== */
#fireworks{position:fixed;inset:0;z-index:0}

/* ===== CENTER TEXT ===== */
.center{
    position:fixed;inset:0;
    display:flex;align-items:center;justify-content:center;
    text-align:center;z-index:5;pointer-events:none
}
.txt{
    font-weight:800;letter-spacing:2px;
    opacity:0;filter:blur(8px);
    transform:translateY(10px);
    transition:.6s;
    text-shadow:0 0 20px #ffb3cd;
}
.txt.show{opacity:1;filter:blur(0);transform:none}
.big{font-size:42px}
.med{font-size:30px}
.small{font-size:18px}
@media(max-width:480px){
.big{font-size:28px}
.med{font-size:22px}
.small{font-size:15px}
}

/* ===== COVER ===== */
.cover{
    position:fixed;inset:0;
    display:none;align-items:center;justify-content:center;
    z-index:4
}
.box{
    background:#ffffff22;
    backdrop-filter:blur(18px);
    padding:36px;border-radius:28px
}
button{
    margin-top:20px;padding:14px 32px;
    border-radius:999px;border:none;
    background:#ff6f9f;color:#fff;
    font-weight:600;font-size:16px;cursor:pointer
}

/* ===== POPUP ===== */
.popup{
    position:fixed;inset:0;
    background:#12070fe0;
    display:none;z-index:6
}
.popup.active{display:flex}
.stage{
    margin:auto;width:320px;
    aspect-ratio:3/4;border-radius:26px;
    overflow:hidden;position:relative
}
.stage img{width:110%;height:110%;object-fit:cover}
.subtitle{
    position:absolute;bottom:8%;left:50%;
    transform:translateX(-50%);
    background:#0008;padding:12px 16px;
    border-radius:16px;font-size:15px;
    opacity:0;transition:.6s
}
.subtitle.show{opacity:1}
.caret{
    width:2px;height:1em;background:#fff;
    display:inline-block;animation:blink 1s infinite
}
@keyframes blink{50%{opacity:0}}

/* ===== PETALS ‚Äì ORIGINAL STYLE ===== */
.petal{
    position:absolute;
    top:-40px;
    font-size:18px;
    opacity:.65;
    pointer-events:none;
    animation:fall linear infinite;
}
@keyframes fall{
    to{ transform:translateY(120vh) rotate(360deg); }
}

audio{display:none}
</style>
</head>

<body>

<canvas id="fireworks"></canvas>

<div class="center">
  <div id="centerText" class="txt big"></div>
</div>

<div class="cover" id="cover">
  <div class="box">
    <p>
      2025 c√≥ l·∫Ω ƒë√£ l√†m em m·ªát m·ªèi.<br>
      Anh mu·ªën n√≥i v√†i ƒëi·ªÅu‚Ä¶
    </p>
    <button onclick="openCard()">M·ªü th∆∞ üíå</button>
  </div>
</div>

<div class="popup" id="popup">
  <div class="stage" id="stage">
    <img src="z7354421744919_031aac0efe54eace25a71493b5154129.jpg">
    <div class="subtitle" id="subtitle">
      <span id="text"></span><span class="caret"></span>
    </div>
  </div>
</div>

<audio id="bg" src="music-bg.mp3" loop></audio>

<script>
/* ===== AUTO PLAY MUSIC (DESKTOP) ===== */
const bg = document.getElementById("bg");
bg.volume = 0.4;
bg.play().catch(()=>{}); // desktop OK, mobile s·∫Ω ch·ªù user interaction

/* ===== FIREWORKS ===== */
const fw=document.getElementById("fireworks"),
ctx=fw.getContext("2d");

function resize(){fw.width=innerWidth;fw.height=innerHeight}
resize();addEventListener("resize",resize);

let rockets=[],sparks=[],fireworksRunning=true;

function launch(){
    if(!fireworksRunning) return;
    const c=2+Math.floor(Math.random()*2);
    for(let i=0;i<c;i++){
        rockets.push({
            x:Math.random()*fw.width,
            y:fw.height+10,
            vx:(Math.random()-.5)*1.2,
            vy:-(6+Math.random()*3.5),
            c:`hsl(${330+Math.random()*30},100%,70%)`
        });
    }
}
setInterval(launch,520);

function explode(r){
    const n=90+Math.random()*40;
    for(let i=0;i<n;i++){
        const a=Math.random()*Math.PI*2;
        const s=1.2+Math.random()*3;
        sparks.push({
            x:r.x,y:r.y,
            vx:Math.cos(a)*s,
            vy:Math.sin(a)*s,
            life:60,c:r.c
        });
    }
}

(function draw(){
    requestAnimationFrame(draw);
    if(!fireworksRunning) return;

    ctx.fillStyle="rgba(0,0,0,.14)";
    ctx.fillRect(0,0,fw.width,fw.height);

    rockets.forEach((r,i)=>{
        r.x+=r.vx;r.y+=r.vy;r.vy+=0.03;
        ctx.fillStyle=r.c;
        ctx.fillRect(r.x,r.y,2,7);
        if(r.y<fw.height*(0.25+Math.random()*0.15)){
            explode(r);rockets.splice(i,1);
        }
    });

    sparks.forEach((s,i)=>{
        s.life--;s.x+=s.vx;s.y+=s.vy;s.vy+=0.02;
        ctx.fillRect(s.x,s.y,2,2);
        if(s.life<=0)sparks.splice(i,1);
    });

    if(sparks.length>2600)sparks.splice(0,sparks.length-2600);
})();

/* ===== TEXT SEQUENCES ===== */
const intro=[
 "HAPPY NEW YEAR 2026",
 "V∆∞∆°ng Ph∆∞∆°ng Th·∫£o",
 "Ch√∫c em b∆∞·ªõc sang nƒÉm 2026 g·∫∑p nhi·ªÅu ƒëi·ªÅu may m·∫Øn"
];
const endLines=[
 "Ch√∫c em s·∫Ω chinh ph·ª•c th√†nh c√¥ng c√°c h√†nh tr√¨nh-m·ª•c ti√™u ·ªü nƒÉm 2026",
//  "V√† n·∫øu tr√™n nh·ªØng h√†nh tr√¨nh ·∫•y‚Ä¶",
//  "Em c·∫ßn m·ªôt ng∆∞·ªùi y√™u th∆∞∆°ng em.",
//  "M·ªôt ng∆∞·ªùi lu√¥n l·∫Øng nghe.",
//  "M·ªôt ng∆∞·ªùi lu√¥n mu·ªën ƒë·ªìng h√†nh c√πng em.",
//  "Anh v·∫´n ·ªü ƒë√¢y.",
//  "Kh√¥ng v·ªôi v√†ng.",
//  "Kh√¥ng √©p bu·ªôc.",
//  "Ch·ªâ l√† v·∫´n ch·ªù ‚Äî khi em s·∫µn s√†ng.",
//  "Anh y√™u em ü´∂",
 "The end 2025 ü§ü"
];

const ct=document.getElementById("centerText");
let seq=0;

function showSeq(arr,done){
    ct.textContent=arr[seq];
    requestAnimationFrame(()=>ct.classList.add("show"));
    setTimeout(()=>{
        ct.classList.remove("show");
        setTimeout(()=>{
            seq++;
            if(seq<arr.length)showSeq(arr,done);
            else done&&done();
        },600);
    },3000);
}

/* ch·ªâ ph√°o hoa ‚Üí 3s sau m·ªõi hi·ªán intro */
setTimeout(()=>{
    seq=0;
    showSeq(intro,()=>setTimeout(()=>{
        document.getElementById("cover").style.display="flex";
    },3000));
},3000);

/* ===== POPUP + PETALS ===== */
const sub=document.getElementById("subtitle"),
text=document.getElementById("text"),
stage=document.getElementById("stage");

const msg=[
 "2025 ƒë√£ khi·∫øn em m·ªát m·ªèi r·∫•t nhi·ªÅu.",
 "C√≥ nh·ªØng ng√†y em r∆°i n∆∞·ªõc m·∫Øt v√¨ nh·ªØng chuy·ªán kh√¥ng ƒë√°ng c√≥.",
 "C√≥ nh·ªØng c·ªë g·∫Øng ch·∫≥ng mang l·∫°i k·∫øt qu·∫£ t·ªët ƒë·∫πp n√†o.",
 "Anh bi·∫øt em ƒë√£ m·∫°nh m·∫Ω ƒë·∫øn th·∫ø n√†o khi v·∫´n ti·∫øp t·ª•c b∆∞·ªõc ƒëi.",
 "D√π trong l√≤ng kh√¥ng ph·∫£i l√∫c n√†o c≈©ng ·ªïn.",
 "Anh hy v·ªçng 2026 s·∫Ω l√† nh·ªØng h√†nh tr√¨nh m·ªõi m·∫ª h∆°n.",
 "Nh·∫π nh√†ng h∆°n.",
 "V√† d·ªãu d√†ng v·ªõi em h∆°n."
];

let line=0,char=0,petalTimer=null;

function startPetals(){
    if(petalTimer) return;
    petalTimer=setInterval(()=>{
        const p=document.createElement("div");
        p.className="petal";
        p.textContent="üå∏";
        p.style.left=Math.random()*100+"%";
        p.style.animationDuration=(10+Math.random()*10)+"s";
        stage.appendChild(p);
        setTimeout(()=>p.remove(),20000);
    },2500);
}

function stopPetals(){
    clearInterval(petalTimer);
    petalTimer=null;
    stage.querySelectorAll(".petal").forEach(p=>p.remove());
}

function type(){
    if(char<msg[line].length){
        text.textContent+=msg[line][char++];
        setTimeout(type,45);
    }else{
        if(line===msg.length-1){
            setTimeout(closePopup,2000);
            return;
        }
        setTimeout(()=>{
            sub.classList.remove("show");
            setTimeout(()=>{
                line++;char=0;
                text.textContent="";
                sub.classList.add("show");
                type();
            },600);
        },1600);
    }
}

function openCard(){
    // ƒë·∫£m b·∫£o mobile b·∫Øt ƒë·∫ßu ph√°t nh·∫°c
    bg.play().catch(()=>{});

    document.getElementById("cover").style.display="none";
    document.getElementById("popup").classList.add("active");

    fireworksRunning=false;
    ctx.clearRect(0,0,fw.width,fw.height);

    startPetals();

    line=0;char=0;text.textContent="";
    sub.classList.add("show");
    type();
}

function closePopup(){
    document.getElementById("popup").classList.remove("active");

    stopPetals();
    fireworksRunning=true;

    seq=0;
    showSeq(endLines);
}
</script>

</body>
</html>
